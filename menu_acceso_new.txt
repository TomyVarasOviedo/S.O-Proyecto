#!/bin/bash

#importar las funciones
source /dev/stdin <(echo "import readline; readline.clear_history(); readline.add_history(\"\");")

#se definen las variables
agenda=()
opcion=()

#funcion para poder mostrar el menu
mostarmenu (){
echo "MENU DE LA AGENDA TELEFONICA"
echo "1.AÑADIR UN CONTACTO"
echo "2.BUSCAR UN CONTACTO"
echo "3.EDITAR ALGUN CONTACTO"
echo "4.ELIMINAR ALGUN CONTACTO"
echo "5.MOSTRAR TODOS SUS CONTACTOS"
echo "6.SALIR"
echo ""
echo "INGRESE LA OPCION QUE DESEA EJECUTAR"
read opcion
case $opcion in

1)
    #funcion para poder agregar algun contacto
    agregarcontacto(){
    echo "AÑADIR CONTACTO"
    echo "NOMBRE: "
    read nombre
    echo "TELEFONO: "
    read telefono
    echo "MAIL: "
    read mail

    agenda[$nombre]=("$telefono" "$mail")

    echo "CONTACTO <span class="math-inline"> SE HA AÑADIDO CORRECTAMENTE."
};;

2)
    #funcion para buscar contacto
    buscarcontacto(){
    echo "BUSCAR CONTACTO: "
    echo "NOMBRE: "
    read nombre

    if [[ -n "</span>{agenda[<span class="math-inline">nombre]}" ]]; then telefono=</span>{agenda[<span class="math-inline">nombre][0]} mail=</span>{agenda[$nombre][1]}

    echo "NOMBRE: $nombre"
    echo "TELEFONO: $telefono"
    echo "MAIL: $mail"
    else
    echo "CONTACTO $nombre NO ENCONTRADO"
    fi
};;

3)
    #funcion para editar algun contacto
    editarcontacto(){
    echo "EDITAR CONTACTO:"
    echo "NOMBRE: "  
    read nombre  
    if [[ -n "${agenda[$nombre]}" ]]; then telefono=${agenda[$nombre][0]} mail=${agenda[$nombre][1]}  
    echo "NOMBRE: $nombre"
    echo "TELEFONO: $telefono"
    echo "MAIL: $mail"
    echo ""
    echo "¿QUE QUISIERA EDITAR?"
    echo "1. TELEFONO"
    echo "2. MAIL"
    echo ""
    echo "INGRESE LA OPCION QUE DESEA: "
    read opcioneditar
    case $opcioneditar in
    1)
    echo "NUEVO NUMERO DE TELEFONO: "
    read nuevotelefono
    agenda[$nombre][0]=$nuevotelefono
    echo "TELEFONO ACTUALIZADO CORRECTAMENTE." ;;
    2)
    echo "NUEVO MAIL: "
    read nuevomail
    agenda[$nombre][1]=$nuevomail
    echo "MAIL ACTUALIZADO CORRECTAMENTE." ;;
    *)
    echo "OPCION INVALIDA." ;;
    esac
    else
    echo "CONTACTO $nombre NO ENCONTRADO."
    fi
};;

4)
#funcion para poder eliminar a tu ex de contactos
eliminarcontacto() {
  echo "ELIMINAR CONTACTO:"
  echo "NOMBRE: "
  read nombre

  if [[ -n "${agenda[$nombre]}" ]]; then
    unset agenda[$nombre]
  echo "CONTACTO $nombre ELIMINADO CORRECTAMENTE."
  else
  echo "CONTACTO $nombre NO ENCONTRADO."
  fi
};;

5)
#funcion para mostrar toda la lista de contactos
mostrarcontactos() {
  echo "LISTA DE CONTACTOS:"
  if [[ -z "${agenda[@]}" ]]; then
  echo "NO HAY NINGUNA AGENDA DE CONTACTOS."
  else
    for nombre in "${!agenda[@]}"; do
      telefono=${agenda[$nombre][0]}
      mail=${agenda[$nombre][1]}
      echo "NOMBRE: $nombre"
      echo "TELEFONO: $telefono"
      echo "MAIL: $mail"
      echo ""
    done
  fi
};;

6)
exit;;

*)
   echo "OPCION INVALIDA." ;;
